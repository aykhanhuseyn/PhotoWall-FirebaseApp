(this.webpackJsonpphotowall=this.webpackJsonpphotowall||[]).push([[0],{41:function(t,e,n){t.exports=n(62)},46:function(t,e,n){},62:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"startAddingPost",(function(){return R})),n.d(a,"startLoadingPosts",(function(){return x})),n.d(a,"startRemovingPost",(function(){return X})),n.d(a,"startAddingComment",(function(){return q})),n.d(a,"startLoadingComments",(function(){return z})),n.d(a,"removePost",(function(){return B})),n.d(a,"addPost",(function(){return U})),n.d(a,"loadPosts",(function(){return V})),n.d(a,"addComment",(function(){return G})),n.d(a,"loadComments",(function(){return H}));var o=n(1),r=n.n(o),c=n(25),i=n.n(c),s=(n(46),n(12)),u=n(9),m=n(19),l=n(29),p=n(34),d=[],f={};var h=Object(u.c)({posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE_POST":return t.filter((function(t){return t.id!==e.id}));case"ADD_POST":return[].concat(Object(p.a)(t),[e.post]);case"LOAD_POSTS":return e.posts;default:return t}},comments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_COMMENT":return t[e.postId]?Object(l.a)({},t,Object(m.a)({},e.postId,[].concat(Object(p.a)(t[e.postId]),[e.comment]))):Object(l.a)({},t,Object(m.a)({},e.postId,[e.comment]));case"LOAD_COMMENTS":return e.comments;default:return t}}}),b=n(27),O=n(14),v=n(15),E=n(17),g=n(16),j=n(18),y=n(4),S=n.n(y);function P(t){return r.a.createElement("figure",{className:"figure"},r.a.createElement(s.b,{to:"/Single/".concat(t.post.id)},r.a.createElement("img",{className:"photo",src:t.post.imageLink,alt:t.post.description})),r.a.createElement("figcaption",null,r.a.createElement("p",null,t.post.description)),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:function(){t.startRemovingPost(t.post.id),t.history.push("/")}},"Remove"),r.a.createElement(s.b,{className:"button",to:"/Single/".concat(t.post.id)},r.a.createElement("div",{className:"comment-count"},r.a.createElement("div",{className:"speech-bubble"}),t.comments[t.post.id]?t.comments[t.post.id].length:0))))}P.PropType={post:S.a.object.isRequired};var N=P;function k(t){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(s.b,{className:"addIcon",to:"/AddPhoto"})),r.a.createElement("div",{className:"photoGrid"},t.posts.sort((function(t,e){return e.id-t.id})).map((function(e,n){return r.a.createElement(N,Object.assign({key:n,post:e},t,{index:n}))}))))}k.PropType={posts:S.a.array.isRequired};var D=k,A=n(20),C=function(t){function e(){var t;return Object(O.a)(this,e),(t=Object(E.a)(this,Object(g.a)(e).call(this))).handleSubmit=t.handleSubmit.bind(Object(A.a)(t)),t}return Object(j.a)(e,t),Object(v.a)(e,[{key:"handleSubmit",value:function(t){t.preventDefault();var e=t.target.elements.link.value,n=t.target.elements.description.value;if(e&&n){var a={id:Number(new Date),description:n,imageLink:e};this.props.startAddingPost(a),this.props.onHistory.push("/")}}},{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Link",name:"link"}),r.a.createElement("input",{type:"text",placeholder:"Description",name:"description"}),r.a.createElement("button",null,"Post")))}}]),e}(o.Component),_=n(10),w=function(t){function e(){var t;return Object(O.a)(this,e),(t=Object(E.a)(this,Object(g.a)(e).call(this))).handleSubmit=t.handleSubmit.bind(Object(A.a)(t)),t}return Object(j.a)(e,t),Object(v.a)(e,[{key:"handleSubmit",value:function(t){t.preventDefault();var e=t.target.elements.comment.value;e&&this.props.startAddingComment(this.props.id,e),t.target.elements.comment.value=""}},{key:"render",value:function(){return r.a.createElement("div",{className:"comment"},this.props.comments.map((function(t,e){return r.a.createElement("p",{key:e},t)})),r.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"comment",placeholder:"Comment..."}),r.a.createElement("input",{type:"submit",hidden:!0})))}}]),e}(o.Component),T=function(t){function e(){return Object(O.a)(this,e),Object(E.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(v.a)(e,[{key:"render",value:function(){var t=this.props,e=t.match,n=t.posts,a=Number(e.params.id),o=n.find((function(t){return t.id===a})),c=this.props.comments[a]||[],i=this.props.posts.findIndex((function(t){return t.id===a}));return r.a.createElement("div",{className:"single-photo"},r.a.createElement(N,Object.assign({post:o},this.props,{index:i})),r.a.createElement(w,{startAddingComment:this.props.startAddingComment,comments:c,id:a}))}}]),e}(o.Component),I=function(t){function e(){return Object(O.a)(this,e),Object(E.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(v.a)(e,[{key:"componentDidMount",value:function(){this.props.startLoadingPosts(),this.props.startLoadingComments()}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement(s.b,{to:"/"},"PhotoWall")),r.a.createElement(_.a,{exact:!0,path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement(D,t.props))}}),r.a.createElement(_.a,{path:"/AddPhoto",render:function(e){var n=e.history;return r.a.createElement(C,Object.assign({},t.props,{onHistory:n}))}}),r.a.createElement(_.a,{path:"/Single/:id",render:function(e){return r.a.createElement(T,Object.assign({},t.props,e))}}))}}]),e}(o.Component),L=n(33);L.initializeApp({apiKey:"AIzaSyAjjvU9juqiekyut2YQ4XSwEXPtuZ2Tz8g",authDomain:"photowall-dda40.firebaseapp.com",databaseURL:"https://photowall-dda40.firebaseio.com",projectId:"photowall-dda40",storageBucket:"photowall-dda40.appspot.com",messagingSenderId:"79365496914",appId:"1:79365496914:web:12897f90703a03c659ff8b",measurementId:"G-58M6ZBNKF7"});var M=L.database();function R(t){return function(e){return M.ref("post").update(Object(m.a)({},t.id,t)).then((function(){e(U(t))})).catch((function(t){return console.log(t)}))}}function x(){return function(t){var e=[];return M.ref("post").once("value").then((function(n){n.forEach((function(t){e.push(t.val())})),t(V(e))})).catch((function(t){return console.log(t)}))}}function X(t){return function(e){return M.ref("post/".concat(t)).remove().then((function(){M.ref("comments/".concat(t)).remove(),e(B(t))})).catch((function(t){return console.log(t)}))}}function q(t,e){return function(n){return M.ref("comments/".concat(t)).push(e).then((function(){n(G(e,t))})).catch((function(t){return console.log(t)}))}}function z(){return function(t){var e={};return M.ref("comments").once("value").then((function(n){n.forEach((function(t){e[t.key]=Object.values(t.val())})),t(H(e))})).catch((function(t){return console.log(t)}))}}function B(t){return{type:"REMOVE_POST",id:t}}function U(t){return{type:"ADD_POST",post:t}}function V(t){return{type:"LOAD_POSTS",posts:t}}function G(t,e){return{type:"ADD_COMMENT",comment:t,postId:e}}function H(t){return console.log(t),{type:"LOAD_COMMENTS",comments:t}}var J=Object(_.e)(Object(b.b)((function(t){return{posts:t.posts,comments:t.comments}}),(function(t){return Object(u.b)(a,t)}))(I)),K=n(40),Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,F=Object(u.e)(h,Z(Object(u.a)(K.a)));i.a.render(r.a.createElement(b.a,{store:F},r.a.createElement(s.a,null,r.a.createElement(J,null))),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.709562ec.chunk.js.map